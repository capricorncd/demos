var PIXI=window.PIXI;PIXI.CanvasRenderer=function(e,t){this.width=e||800,this.height=t||600,this.refresh=!0,this.view=document.createElement("canvas"),this.view.width=this.width,this.view.height=this.height,this.view.background="#FF0000",this.count=0,this.context=this.view.getContext("2d")},PIXI.CanvasRenderer.constructor=PIXI.CanvasRenderer,PIXI.CanvasRenderer.prototype.render=function(e){e.__childrenAdded=[],e.__childrenRemoved=[],PIXI.texturesToUpdate=[],this.context.setTransform(1,0,0,1,0,0),e.updateTransform(),this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height),this.renderDisplayObject(e)},PIXI.CanvasRenderer.prototype.renderDisplayObject=function(e){var t=e.worldTransform,r=this.context;r.globalCompositeOperation="source-over";var i=!1;if(e.visible){if(e instanceof PIXI.Sprite){var h=e.texture.frame;h&&(r.globalAlpha=e.worldAlpha,0==e.rotation?(i||this.context.setTransform(1,0,0,1,0,0),i=!0,r.drawImage(e.texture.baseTexture.image,h.x,h.y,h.width,h.height,t[2]+e.anchor.x*-h.width+.5|0,t[5]+e.anchor.y*-h.height+.5|0,h.width*t[0],h.height*t[4])):(i=!1,r.setTransform(t[0],t[3],t[1],t[4],t[2],t[5]),r.drawImage(e.texture.baseTexture.image,h.x,h.y,h.width,h.height,e.anchor.x*-h.width,e.anchor.y*-h.height,h.width,h.height)))}else e instanceof PIXI.Strip&&(r.setTransform(t[0],t[3],t[1],t[4],t[2],t[5]),this.renderStrip(e));for(var n=0;n<e.children.length;n++)this.renderDisplayObject(e.children[n])}},PIXI.CanvasRenderer.prototype.renderStripFlat=function(e){var t=this.context,r=e.verticies,i=(e.uvs,r.length/2);this.count++,t.beginPath();for(var h=1;h<i-2;h++){var n=2*h,a=r[n],s=r[n+2],o=r[n+4],d=r[n+1],c=r[n+3],v=r[n+5];t.moveTo(a,d),t.lineTo(s,c),t.lineTo(o,v)}t.fillStyle="#FF0000",t.fill(),t.closePath()},PIXI.CanvasRenderer.prototype.renderStrip=function(e){var t=this.context,r=e.verticies,i=e.uvs,h=r.length/2;this.count++;for(var n=1;n<h-2;n++){var a=2*n,s=r[a],o=r[a+2],d=r[a+4],c=r[a+1],v=r[a+3],l=r[a+5],g=i[a]*e.texture.width,u=i[a+2]*e.texture.width,w=i[a+4]*e.texture.width,I=i[a+1]*e.texture.height,x=i[a+3]*e.texture.height,f=i[a+5]*e.texture.height;t.save(),t.beginPath(),t.moveTo(s,c),t.lineTo(o,v),t.lineTo(d,l),t.closePath(),t.clip();var p=g*x+I*w+u*f-x*w-I*u-g*f,m=s*x+I*d+o*f-x*d-I*o-s*f,P=g*o+s*w+u*d-o*w-s*u-g*d,T=g*x*d+I*o*w+s*u*f-s*x*w-I*u*d-g*o*f,y=c*x+I*l+v*f-x*l-I*v-c*f,X=g*v+c*w+u*l-v*w-c*u-g*l,b=g*x*l+I*v*w+c*u*f-c*x*w-I*u*l-g*v*f;t.transform(m/p,y/p,P/p,X/p,T/p,b/p),t.drawImage(e.texture.baseTexture.image,0,0),t.restore()}},PIXI.CanvasRenderer.prototype.resize=function(e,t){this.width=e,this.height=t,this.view.width=e,this.view.height=t};