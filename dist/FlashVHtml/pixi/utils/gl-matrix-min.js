!function(t,r){"object"==typeof exports?module.exports=r(global):"function"==typeof define&&define.amd?define([],(function(){return r(t)})):r(t)}(this,(function(t){function r(t){return a=t}function n(){return a="undefined"!=typeof Float32Array?Float32Array:Array}var e={};!function(){if("undefined"!=typeof Float32Array){var t=new Float32Array(1),r=new Int32Array(t.buffer);e.invsqrt=function(n){t[0]=n,r[0]=1597463007-(r[0]>>1);var e=t[0];return e*(1.5-.5*n*e*e)}}else e.invsqrt=function(t){return 1/Math.sqrt(t)}}();var a=null;n();var u={create:function(t){var r=new a(3);return t?(r[0]=t[0],r[1]=t[1],r[2]=t[2]):r[0]=r[1]=r[2]=0,r},createFrom:function(t,r,n){var e=new a(3);return e[0]=t,e[1]=r,e[2]=n,e},set:function(t,r){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r},equal:function(t,r){return t===r||1e-6>Math.abs(t[0]-r[0])&&1e-6>Math.abs(t[1]-r[1])&&1e-6>Math.abs(t[2]-r[2])},add:function(t,r,n){return n&&t!==n?(n[0]=t[0]+r[0],n[1]=t[1]+r[1],n[2]=t[2]+r[2],n):(t[0]+=r[0],t[1]+=r[1],t[2]+=r[2],t)},subtract:function(t,r,n){return n&&t!==n?(n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],n):(t[0]-=r[0],t[1]-=r[1],t[2]-=r[2],t)},multiply:function(t,r,n){return n&&t!==n?(n[0]=t[0]*r[0],n[1]=t[1]*r[1],n[2]=t[2]*r[2],n):(t[0]*=r[0],t[1]*=r[1],t[2]*=r[2],t)},negate:function(t,r){return r||(r=t),r[0]=-t[0],r[1]=-t[1],r[2]=-t[2],r},scale:function(t,r,n){return n&&t!==n?(n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n):(t[0]*=r,t[1]*=r,t[2]*=r,t)},normalize:function(t,r){r||(r=t);var n=t[0],e=t[1],a=t[2],u=Math.sqrt(n*n+e*e+a*a);return u?1===u?(r[0]=n,r[1]=e,r[2]=a,r):(u=1/u,r[0]=n*u,r[1]=e*u,r[2]=a*u,r):(r[0]=0,r[1]=0,r[2]=0,r)},cross:function(t,r,n){n||(n=t);var e=t[0],a=t[1],u=(t=t[2],r[0]),i=r[1];return r=r[2],n[0]=a*r-t*i,n[1]=t*u-e*r,n[2]=e*i-a*u,n},length:function(t){var r=t[0],n=t[1];return t=t[2],Math.sqrt(r*r+n*n+t*t)},squaredLength:function(t){var r=t[0],n=t[1];return r*r+n*n+(t=t[2])*t},dot:function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]},direction:function(t,r,n){n||(n=t);var e=t[0]-r[0],a=t[1]-r[1];return t=t[2]-r[2],(r=Math.sqrt(e*e+a*a+t*t))?(r=1/r,n[0]=e*r,n[1]=a*r,n[2]=t*r,n):(n[0]=0,n[1]=0,n[2]=0,n)},lerp:function(t,r,n,e){return e||(e=t),e[0]=t[0]+n*(r[0]-t[0]),e[1]=t[1]+n*(r[1]-t[1]),e[2]=t[2]+n*(r[2]-t[2]),e},dist:function(t,r){var n=r[0]-t[0],e=r[1]-t[1],a=r[2]-t[2];return Math.sqrt(n*n+e*e+a*a)}},i=null,o=new a(4);u.unproject=function(t,r,n,e,a){a||(a=t),i||(i=v.create());var u=i;return o[0]=2*(t[0]-e[0])/e[2]-1,o[1]=2*(t[1]-e[1])/e[3]-1,o[2]=2*t[2]-1,o[3]=1,v.multiply(n,r,u),v.inverse(u)?(v.multiplyVec4(u,o),0===o[3]?null:(a[0]=o[0]/o[3],a[1]=o[1]/o[3],a[2]=o[2]/o[3],a)):null};var c=u.createFrom(1,0,0),f=u.createFrom(0,1,0),s=u.createFrom(0,0,1),M=u.create();u.rotationTo=function(t,r,n){if(n||(n=m.create()),1<=(e=u.dot(t,r)))m.set(b,n);else if(-.999999>e)u.cross(c,t,M),1e-6>u.length(M)&&u.cross(f,t,M),1e-6>u.length(M)&&u.cross(s,t,M),u.normalize(M),m.fromAngleAxis(Math.PI,M,n);else{var e,a=1/(e=Math.sqrt(2*(1+e)));u.cross(t,r,M),n[0]=M[0]*a,n[1]=M[1]*a,n[2]=M[2]*a,n[3]=.5*e,m.normalize(n)}return 1<n[3]?n[3]=1:-1>n[3]&&(n[3]=-1),n},u.str=function(t){return"["+t[0]+", "+t[1]+", "+t[2]+"]"};var h,l={create:function(t){var r=new a(9);return t?(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8]):r[0]=r[1]=r[2]=r[3]=r[4]=r[5]=r[6]=r[7]=r[8]=0,r},createFrom:function(t,r,n,e,u,i,o,c,f){var s=new a(9);return s[0]=t,s[1]=r,s[2]=n,s[3]=e,s[4]=u,s[5]=i,s[6]=o,s[7]=c,s[8]=f,s},determinant:function(t){var r=t[3],n=t[4],e=t[5],a=t[6],u=t[7],i=t[8];return t[0]*(i*n-e*u)+t[1]*(-i*r+e*a)+t[2]*(u*r-n*a)},inverse:function(t,r){var n=t[0],e=t[1],a=t[2],u=t[3],i=t[4],o=t[5],c=t[6],f=t[7],s=t[8],M=s*i-o*f,h=-s*u+o*c,v=f*u-i*c,m=n*M+e*h+a*v;return m?(m=1/m,r||(r=l.create()),r[0]=M*m,r[1]=(-s*e+a*f)*m,r[2]=(o*e-a*i)*m,r[3]=h*m,r[4]=(s*n-a*c)*m,r[5]=(-o*n+a*u)*m,r[6]=v*m,r[7]=(-f*n+e*c)*m,r[8]=(i*n-e*u)*m,r):null},multiply:function(t,r,n){n||(n=t);var e=t[0],a=t[1],u=t[2],i=t[3],o=t[4],c=t[5],f=t[6],s=t[7],M=(t=t[8],r[0]),h=r[1],l=r[2],v=r[3],m=r[4],b=r[5],y=r[6],d=r[7];return r=r[8],n[0]=M*e+h*i+l*f,n[1]=M*a+h*o+l*s,n[2]=M*u+h*c+l*t,n[3]=v*e+m*i+b*f,n[4]=v*a+m*o+b*s,n[5]=v*u+m*c+b*t,n[6]=y*e+d*i+r*f,n[7]=y*a+d*o+r*s,n[8]=y*u+d*c+r*t,n},multiplyVec2:function(t,r,n){n||(n=r);var e=r[0];return r=r[1],n[0]=e*t[0]+r*t[3]+t[6],n[1]=e*t[1]+r*t[4]+t[7],n},multiplyVec3:function(t,r,n){n||(n=r);var e=r[0],a=r[1];return r=r[2],n[0]=e*t[0]+a*t[3]+r*t[6],n[1]=e*t[1]+a*t[4]+r*t[7],n[2]=e*t[2]+a*t[5]+r*t[8],n},set:function(t,r){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r},equal:function(t,r){return t===r||1e-6>Math.abs(t[0]-r[0])&&1e-6>Math.abs(t[1]-r[1])&&1e-6>Math.abs(t[2]-r[2])&&1e-6>Math.abs(t[3]-r[3])&&1e-6>Math.abs(t[4]-r[4])&&1e-6>Math.abs(t[5]-r[5])&&1e-6>Math.abs(t[6]-r[6])&&1e-6>Math.abs(t[7]-r[7])&&1e-6>Math.abs(t[8]-r[8])},identity:function(t){return t||(t=l.create()),t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},transpose:function(t,r){if(!r||t===r){var n=t[1],e=t[2],a=t[5];return t[1]=t[3],t[2]=t[6],t[3]=n,t[5]=t[7],t[6]=e,t[7]=a,t}return r[0]=t[0],r[1]=t[3],r[2]=t[6],r[3]=t[1],r[4]=t[4],r[5]=t[7],r[6]=t[2],r[7]=t[5],r[8]=t[8],r},toMat4:function(t,r){return r||(r=v.create()),r[15]=1,r[14]=0,r[13]=0,r[12]=0,r[11]=0,r[10]=t[8],r[9]=t[7],r[8]=t[6],r[7]=0,r[6]=t[5],r[5]=t[4],r[4]=t[3],r[3]=0,r[2]=t[2],r[1]=t[1],r[0]=t[0],r},str:function(t){return"["+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+"]"}},v={create:function(t){var r=new a(16);return t&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r},createFrom:function(t,r,n,e,u,i,o,c,f,s,M,h,l,v,m,b){var y=new a(16);return y[0]=t,y[1]=r,y[2]=n,y[3]=e,y[4]=u,y[5]=i,y[6]=o,y[7]=c,y[8]=f,y[9]=s,y[10]=M,y[11]=h,y[12]=l,y[13]=v,y[14]=m,y[15]=b,y},set:function(t,r){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r},equal:function(t,r){return t===r||1e-6>Math.abs(t[0]-r[0])&&1e-6>Math.abs(t[1]-r[1])&&1e-6>Math.abs(t[2]-r[2])&&1e-6>Math.abs(t[3]-r[3])&&1e-6>Math.abs(t[4]-r[4])&&1e-6>Math.abs(t[5]-r[5])&&1e-6>Math.abs(t[6]-r[6])&&1e-6>Math.abs(t[7]-r[7])&&1e-6>Math.abs(t[8]-r[8])&&1e-6>Math.abs(t[9]-r[9])&&1e-6>Math.abs(t[10]-r[10])&&1e-6>Math.abs(t[11]-r[11])&&1e-6>Math.abs(t[12]-r[12])&&1e-6>Math.abs(t[13]-r[13])&&1e-6>Math.abs(t[14]-r[14])&&1e-6>Math.abs(t[15]-r[15])},identity:function(t){return t||(t=v.create()),t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},transpose:function(t,r){if(!r||t===r){var n=t[1],e=t[2],a=t[3],u=t[6],i=t[7],o=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=n,t[6]=t[9],t[7]=t[13],t[8]=e,t[9]=u,t[11]=t[14],t[12]=a,t[13]=i,t[14]=o,t}return r[0]=t[0],r[1]=t[4],r[2]=t[8],r[3]=t[12],r[4]=t[1],r[5]=t[5],r[6]=t[9],r[7]=t[13],r[8]=t[2],r[9]=t[6],r[10]=t[10],r[11]=t[14],r[12]=t[3],r[13]=t[7],r[14]=t[11],r[15]=t[15],r},determinant:function(t){var r=t[0],n=t[1],e=t[2],a=t[3],u=t[4],i=t[5],o=t[6],c=t[7],f=t[8],s=t[9],M=t[10],h=t[11],l=t[12],v=t[13],m=t[14];return l*s*o*a-f*v*o*a-l*i*M*a+u*v*M*a+f*i*m*a-u*s*m*a-l*s*e*c+f*v*e*c+l*n*M*c-r*v*M*c-f*n*m*c+r*s*m*c+l*i*e*h-u*v*e*h-l*n*o*h+r*v*o*h+u*n*m*h-r*i*m*h-f*i*e*(t=t[15])+u*s*e*t+f*n*o*t-r*s*o*t-u*n*M*t+r*i*M*t},inverse:function(t,r){r||(r=t);var n=t[0],e=t[1],a=t[2],u=t[3],i=t[4],o=t[5],c=t[6],f=t[7],s=t[8],M=t[9],h=t[10],l=t[11],v=t[12],m=t[13],b=t[14],y=t[15],d=n*o-e*i,p=n*c-a*i,q=n*f-u*i,A=e*c-a*o,g=e*f-u*o,x=a*f-u*c,w=s*m-M*v,F=s*b-h*v,T=s*y-l*v,R=M*b-h*m,V=M*y-l*m,z=h*y-l*b,I=d*z-p*V+q*R+A*T-g*F+x*w;return I?(I=1/I,r[0]=(o*z-c*V+f*R)*I,r[1]=(-e*z+a*V-u*R)*I,r[2]=(m*x-b*g+y*A)*I,r[3]=(-M*x+h*g-l*A)*I,r[4]=(-i*z+c*T-f*F)*I,r[5]=(n*z-a*T+u*F)*I,r[6]=(-v*x+b*q-y*p)*I,r[7]=(s*x-h*q+l*p)*I,r[8]=(i*V-o*T+f*w)*I,r[9]=(-n*V+e*T-u*w)*I,r[10]=(v*g-m*q+y*d)*I,r[11]=(-s*g+M*q-l*d)*I,r[12]=(-i*R+o*F-c*w)*I,r[13]=(n*R-e*F+a*w)*I,r[14]=(-v*A+m*p-b*d)*I,r[15]=(s*A-M*p+h*d)*I,r):null},toRotationMat:function(t,r){return r||(r=v.create()),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},toMat3:function(t,r){return r||(r=l.create()),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[4],r[4]=t[5],r[5]=t[6],r[6]=t[8],r[7]=t[9],r[8]=t[10],r},toInverseMat3:function(t,r){var n=t[0],e=t[1],a=t[2],u=t[4],i=t[5],o=t[6],c=t[8],f=t[9],s=t[10],M=s*i-o*f,h=-s*u+o*c,v=f*u-i*c,m=n*M+e*h+a*v;return m?(m=1/m,r||(r=l.create()),r[0]=M*m,r[1]=(-s*e+a*f)*m,r[2]=(o*e-a*i)*m,r[3]=h*m,r[4]=(s*n-a*c)*m,r[5]=(-o*n+a*u)*m,r[6]=v*m,r[7]=(-f*n+e*c)*m,r[8]=(i*n-e*u)*m,r):null},multiply:function(t,r,n){n||(n=t);var e=t[0],a=t[1],u=t[2],i=t[3],o=t[4],c=t[5],f=t[6],s=t[7],M=t[8],h=t[9],l=t[10],v=t[11],m=t[12],b=t[13],y=t[14],d=(t=t[15],r[0]),p=r[1],q=r[2],A=r[3];return n[0]=d*e+p*o+q*M+A*m,n[1]=d*a+p*c+q*h+A*b,n[2]=d*u+p*f+q*l+A*y,n[3]=d*i+p*s+q*v+A*t,d=r[4],p=r[5],q=r[6],A=r[7],n[4]=d*e+p*o+q*M+A*m,n[5]=d*a+p*c+q*h+A*b,n[6]=d*u+p*f+q*l+A*y,n[7]=d*i+p*s+q*v+A*t,d=r[8],p=r[9],q=r[10],A=r[11],n[8]=d*e+p*o+q*M+A*m,n[9]=d*a+p*c+q*h+A*b,n[10]=d*u+p*f+q*l+A*y,n[11]=d*i+p*s+q*v+A*t,d=r[12],p=r[13],q=r[14],A=r[15],n[12]=d*e+p*o+q*M+A*m,n[13]=d*a+p*c+q*h+A*b,n[14]=d*u+p*f+q*l+A*y,n[15]=d*i+p*s+q*v+A*t,n},multiplyVec3:function(t,r,n){n||(n=r);var e=r[0],a=r[1];return r=r[2],n[0]=t[0]*e+t[4]*a+t[8]*r+t[12],n[1]=t[1]*e+t[5]*a+t[9]*r+t[13],n[2]=t[2]*e+t[6]*a+t[10]*r+t[14],n},multiplyVec4:function(t,r,n){n||(n=r);var e=r[0],a=r[1],u=r[2];return r=r[3],n[0]=t[0]*e+t[4]*a+t[8]*u+t[12]*r,n[1]=t[1]*e+t[5]*a+t[9]*u+t[13]*r,n[2]=t[2]*e+t[6]*a+t[10]*u+t[14]*r,n[3]=t[3]*e+t[7]*a+t[11]*u+t[15]*r,n},translate:function(t,r,n){var e,a,u,i,o,c,f,s,M,h,l,v,m=r[0],b=r[1];return r=r[2],n&&t!==n?(e=t[0],a=t[1],u=t[2],i=t[3],o=t[4],c=t[5],f=t[6],s=t[7],M=t[8],h=t[9],l=t[10],v=t[11],n[0]=e,n[1]=a,n[2]=u,n[3]=i,n[4]=o,n[5]=c,n[6]=f,n[7]=s,n[8]=M,n[9]=h,n[10]=l,n[11]=v,n[12]=e*m+o*b+M*r+t[12],n[13]=a*m+c*b+h*r+t[13],n[14]=u*m+f*b+l*r+t[14],n[15]=i*m+s*b+v*r+t[15],n):(t[12]=t[0]*m+t[4]*b+t[8]*r+t[12],t[13]=t[1]*m+t[5]*b+t[9]*r+t[13],t[14]=t[2]*m+t[6]*b+t[10]*r+t[14],t[15]=t[3]*m+t[7]*b+t[11]*r+t[15],t)},scale:function(t,r,n){var e=r[0],a=r[1];return r=r[2],n&&t!==n?(n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n[4]=t[4]*a,n[5]=t[5]*a,n[6]=t[6]*a,n[7]=t[7]*a,n[8]=t[8]*r,n[9]=t[9]*r,n[10]=t[10]*r,n[11]=t[11]*r,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n):(t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=e,t[4]*=a,t[5]*=a,t[6]*=a,t[7]*=a,t[8]*=r,t[9]*=r,t[10]*=r,t[11]*=r,t)},rotate:function(t,r,n,e){var a,u,i,o,c,f,s,M,h,l,v,m,b,y,d,p,q,A,g,x,w=n[0],F=n[1],T=(n=n[2],Math.sqrt(w*w+F*F+n*n));return T?(1!==T&&(w*=T=1/T,F*=T,n*=T),a=Math.sin(r),i=1-(u=Math.cos(r)),r=t[0],T=t[1],o=t[2],c=t[3],f=t[4],s=t[5],M=t[6],h=t[7],l=t[8],v=t[9],m=t[10],b=t[11],y=w*w*i+u,d=F*w*i+n*a,p=n*w*i-F*a,q=w*F*i-n*a,A=F*F*i+u,g=n*F*i+w*a,x=w*n*i+F*a,w=F*n*i-w*a,F=n*n*i+u,e?t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]):e=t,e[0]=r*y+f*d+l*p,e[1]=T*y+s*d+v*p,e[2]=o*y+M*d+m*p,e[3]=c*y+h*d+b*p,e[4]=r*q+f*A+l*g,e[5]=T*q+s*A+v*g,e[6]=o*q+M*A+m*g,e[7]=c*q+h*A+b*g,e[8]=r*x+f*w+l*F,e[9]=T*x+s*w+v*F,e[10]=o*x+M*w+m*F,e[11]=c*x+h*w+b*F,e):null},rotateX:function(t,r,n){var e=Math.sin(r),a=(r=Math.cos(r),t[4]),u=t[5],i=t[6],o=t[7],c=t[8],f=t[9],s=t[10],M=t[11];return n?t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]):n=t,n[4]=a*r+c*e,n[5]=u*r+f*e,n[6]=i*r+s*e,n[7]=o*r+M*e,n[8]=a*-e+c*r,n[9]=u*-e+f*r,n[10]=i*-e+s*r,n[11]=o*-e+M*r,n},rotateY:function(t,r,n){var e=Math.sin(r),a=(r=Math.cos(r),t[0]),u=t[1],i=t[2],o=t[3],c=t[8],f=t[9],s=t[10],M=t[11];return n?t!==n&&(n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]):n=t,n[0]=a*r+c*-e,n[1]=u*r+f*-e,n[2]=i*r+s*-e,n[3]=o*r+M*-e,n[8]=a*e+c*r,n[9]=u*e+f*r,n[10]=i*e+s*r,n[11]=o*e+M*r,n},rotateZ:function(t,r,n){var e=Math.sin(r),a=(r=Math.cos(r),t[0]),u=t[1],i=t[2],o=t[3],c=t[4],f=t[5],s=t[6],M=t[7];return n?t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]):n=t,n[0]=a*r+c*e,n[1]=u*r+f*e,n[2]=i*r+s*e,n[3]=o*r+M*e,n[4]=a*-e+c*r,n[5]=u*-e+f*r,n[6]=i*-e+s*r,n[7]=o*-e+M*r,n},frustum:function(t,r,n,e,a,u,i){i||(i=v.create());var o=r-t,c=e-n,f=u-a;return i[0]=2*a/o,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*a/c,i[6]=0,i[7]=0,i[8]=(r+t)/o,i[9]=(e+n)/c,i[10]=-(u+a)/f,i[11]=-1,i[12]=0,i[13]=0,i[14]=-2*u*a/f,i[15]=0,i},perspective:function(t,r,n,e,a){return r*=t=n*Math.tan(t*Math.PI/360),v.frustum(-r,r,-t,t,n,e,a)},ortho:function(t,r,n,e,a,u,i){i||(i=v.create());var o=r-t,c=e-n,f=u-a;return i[0]=2/o,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2/c,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=-2/f,i[11]=0,i[12]=-(t+r)/o,i[13]=-(e+n)/c,i[14]=-(u+a)/f,i[15]=1,i},lookAt:function(t,r,n,e){e||(e=v.create());var a,u,i,o,c,f,s,M,h=t[0],l=t[1];return t=t[2],i=n[0],o=n[1],u=n[2],s=r[0],n=r[1],a=r[2],h===s&&l===n&&t===a?v.identity(e):(r=h-s,n=l-n,s=t-a,a=o*(s*=M=1/Math.sqrt(r*r+n*n+s*s))-u*(n*=M),u=u*(r*=M)-i*s,i=i*n-o*r,(M=Math.sqrt(a*a+u*u+i*i))?(a*=M=1/M,u*=M,i*=M):i=u=a=0,o=n*i-s*u,c=s*a-r*i,f=r*u-n*a,(M=Math.sqrt(o*o+c*c+f*f))?(o*=M=1/M,c*=M,f*=M):f=c=o=0,e[0]=a,e[1]=o,e[2]=r,e[3]=0,e[4]=u,e[5]=c,e[6]=n,e[7]=0,e[8]=i,e[9]=f,e[10]=s,e[11]=0,e[12]=-(a*h+u*l+i*t),e[13]=-(o*h+c*l+f*t),e[14]=-(r*h+n*l+s*t),e[15]=1,e)},fromRotationTranslation:function(t,r,n){n||(n=v.create());var e=t[0],a=t[1],u=t[2],i=t[3],o=u+u,c=(t=e*(s=e+e),e*(M=a+a)),f=(e*=o,a*M),s=(a*=o,u*=o,i*s),M=i*M;return i*=o,n[0]=1-(f+u),n[1]=c+i,n[2]=e-M,n[3]=0,n[4]=c-i,n[5]=1-(t+u),n[6]=a+s,n[7]=0,n[8]=e+M,n[9]=a-s,n[10]=1-(t+f),n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n},str:function(t){return"["+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+"]"}},m={create:function(t){var r=new a(4);return t?(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3]):r[0]=r[1]=r[2]=r[3]=0,r},createFrom:function(t,r,n,e){var u=new a(4);return u[0]=t,u[1]=r,u[2]=n,u[3]=e,u},set:function(t,r){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r},equal:function(t,r){return t===r||1e-6>Math.abs(t[0]-r[0])&&1e-6>Math.abs(t[1]-r[1])&&1e-6>Math.abs(t[2]-r[2])&&1e-6>Math.abs(t[3]-r[3])},identity:function(t){return t||(t=m.create()),t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}},b=m.identity();m.calculateW=function(t,r){var n=t[0],e=t[1],a=t[2];return r&&t!==r?(r[0]=n,r[1]=e,r[2]=a,r[3]=-Math.sqrt(Math.abs(1-n*n-e*e-a*a)),r):(t[3]=-Math.sqrt(Math.abs(1-n*n-e*e-a*a)),t)},m.dot=function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3]},m.inverse=function(t,r){var n=t[0],e=t[1],a=t[2],u=t[3];return n=(n=n*n+e*e+a*a+u*u)?1/n:0,r&&t!==r?(r[0]=-t[0]*n,r[1]=-t[1]*n,r[2]=-t[2]*n,r[3]=t[3]*n,r):(t[0]*=-n,t[1]*=-n,t[2]*=-n,t[3]*=n,t)},m.conjugate=function(t,r){return r&&t!==r?(r[0]=-t[0],r[1]=-t[1],r[2]=-t[2],r[3]=t[3],r):(t[0]*=-1,t[1]*=-1,t[2]*=-1,t)},m.length=function(t){var r=t[0],n=t[1],e=t[2];return t=t[3],Math.sqrt(r*r+n*n+e*e+t*t)},m.normalize=function(t,r){r||(r=t);var n=t[0],e=t[1],a=t[2],u=t[3],i=Math.sqrt(n*n+e*e+a*a+u*u);return 0===i?(r[0]=0,r[1]=0,r[2]=0,r[3]=0,r):(i=1/i,r[0]=n*i,r[1]=e*i,r[2]=a*i,r[3]=u*i,r)},m.add=function(t,r,n){return n&&t!==n?(n[0]=t[0]+r[0],n[1]=t[1]+r[1],n[2]=t[2]+r[2],n[3]=t[3]+r[3],n):(t[0]+=r[0],t[1]+=r[1],t[2]+=r[2],t[3]+=r[3],t)},m.multiply=function(t,r,n){n||(n=t);var e=t[0],a=t[1],u=t[2],i=(t=t[3],r[0]),o=r[1],c=r[2];return r=r[3],n[0]=e*r+t*i+a*c-u*o,n[1]=a*r+t*o+u*i-e*c,n[2]=u*r+t*c+e*o-a*i,n[3]=t*r-e*i-a*o-u*c,n},m.multiplyVec3=function(t,r,n){n||(n=r);var e=r[0],a=r[1],u=r[2],i=(r=t[0],t[1]),o=t[2],c=(t=t[3])*e+i*u-o*a,f=t*a+o*e-r*u,s=t*u+r*a-i*e;return e=-r*e-i*a-o*u,n[0]=c*t+e*-r+f*-o-s*-i,n[1]=f*t+e*-i+s*-r-c*-o,n[2]=s*t+e*-o+c*-i-f*-r,n},m.scale=function(t,r,n){return n&&t!==n?(n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n[3]=t[3]*r,n):(t[0]*=r,t[1]*=r,t[2]*=r,t[3]*=r,t)},m.toMat3=function(t,r){r||(r=l.create());var n=t[0],e=t[1],a=(c=t[2])+c,u=n*(f=n+n),i=n*(s=e+e),o=(n*=a,e*s),c=(e*=a,c*a),f=(M=t[3])*f,s=M*s,M=M*a;return r[0]=1-(o+c),r[1]=i+M,r[2]=n-s,r[3]=i-M,r[4]=1-(u+c),r[5]=e+f,r[6]=n+s,r[7]=e-f,r[8]=1-(u+o),r},m.toMat4=function(t,r){r||(r=v.create());var n=t[0],e=t[1],a=(c=t[2])+c,u=n*(f=n+n),i=n*(s=e+e),o=(n*=a,e*s),c=(e*=a,c*a),f=(M=t[3])*f,s=M*s,M=M*a;return r[0]=1-(o+c),r[1]=i+M,r[2]=n-s,r[3]=0,r[4]=i-M,r[5]=1-(u+c),r[6]=e+f,r[7]=0,r[8]=n+s,r[9]=e-f,r[10]=1-(u+o),r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},m.slerp=function(t,r,n,e){e||(e=t);var a,u,i=t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3];return 1<=Math.abs(i)?(e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e):(a=Math.acos(i),u=Math.sqrt(1-i*i),.001>Math.abs(u)?(e[0]=.5*t[0]+.5*r[0],e[1]=.5*t[1]+.5*r[1],e[2]=.5*t[2]+.5*r[2],e[3]=.5*t[3]+.5*r[3],e):(i=Math.sin((1-n)*a)/u,n=Math.sin(n*a)/u,e[0]=t[0]*i+r[0]*n,e[1]=t[1]*i+r[1]*n,e[2]=t[2]*i+r[2]*n,e[3]=t[3]*i+r[3]*n,e))},m.fromRotationMatrix=function(t,r){r||(r=m.create());var n,e=t[0]+t[4]+t[8];if(0<e)n=Math.sqrt(e+1),r[3]=.5*n,n=.5/n,r[0]=(t[7]-t[5])*n,r[1]=(t[2]-t[6])*n,r[2]=(t[3]-t[1])*n;else{n=m.fromRotationMatrix.s_iNext=m.fromRotationMatrix.s_iNext||[1,2,0],e=0,t[4]>t[0]&&(e=1),t[8]>t[3*e+e]&&(e=2);var a=n[e],u=n[a];n=Math.sqrt(t[3*e+e]-t[3*a+a]-t[3*u+u]+1),r[e]=.5*n,n=.5/n,r[3]=(t[3*u+a]-t[3*a+u])*n,r[a]=(t[3*a+e]+t[3*e+a])*n,r[u]=(t[3*u+e]+t[3*e+u])*n}return r},l.toQuat4=m.fromRotationMatrix,h=l.create(),m.fromAxes=function(t,r,n,e){return h[0]=r[0],h[3]=r[1],h[6]=r[2],h[1]=n[0],h[4]=n[1],h[7]=n[2],h[2]=t[0],h[5]=t[1],h[8]=t[2],m.fromRotationMatrix(h,e)},m.identity=function(t){return t||(t=m.create()),t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},m.fromAngleAxis=function(t,r,n){n||(n=m.create()),t*=.5;var e=Math.sin(t);return n[3]=Math.cos(t),n[0]=e*r[0],n[1]=e*r[1],n[2]=e*r[2],n},m.toAngleAxis=function(t,r){r||(r=t);var n=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];return 0<n?(r[3]=2*Math.acos(t[3]),n=e.invsqrt(n),r[0]=t[0]*n,r[1]=t[1]*n,r[2]=t[2]*n):(r[3]=0,r[0]=1,r[1]=0,r[2]=0),r},m.str=function(t){return"["+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+"]"};var y={create:function(t){var r=new a(2);return t?(r[0]=t[0],r[1]=t[1]):(r[0]=0,r[1]=0),r},createFrom:function(t,r){var n=new a(2);return n[0]=t,n[1]=r,n},add:function(t,r,n){return n||(n=r),n[0]=t[0]+r[0],n[1]=t[1]+r[1],n},subtract:function(t,r,n){return n||(n=r),n[0]=t[0]-r[0],n[1]=t[1]-r[1],n},multiply:function(t,r,n){return n||(n=r),n[0]=t[0]*r[0],n[1]=t[1]*r[1],n},divide:function(t,r,n){return n||(n=r),n[0]=t[0]/r[0],n[1]=t[1]/r[1],n},scale:function(t,r,n){return n||(n=t),n[0]=t[0]*r,n[1]=t[1]*r,n},dist:function(t,r){var n=r[0]-t[0],e=r[1]-t[1];return Math.sqrt(n*n+e*e)},set:function(t,r){return r[0]=t[0],r[1]=t[1],r},equal:function(t,r){return t===r||1e-6>Math.abs(t[0]-r[0])&&1e-6>Math.abs(t[1]-r[1])},negate:function(t,r){return r||(r=t),r[0]=-t[0],r[1]=-t[1],r},normalize:function(t,r){r||(r=t);var n=t[0]*t[0]+t[1]*t[1];return 0<n?(n=Math.sqrt(n),r[0]=t[0]/n,r[1]=t[1]/n):r[0]=r[1]=0,r},cross:function(t,r,n){return t=t[0]*r[1]-t[1]*r[0],n?(n[0]=n[1]=0,n[2]=t,n):t},length:function(t){var r=t[0];return t=t[1],Math.sqrt(r*r+t*t)},squaredLength:function(t){var r=t[0];return r*r+(t=t[1])*t},dot:function(t,r){return t[0]*r[0]+t[1]*r[1]},direction:function(t,r,n){n||(n=t);var e=t[0]-r[0];return(r=e*e+(t=t[1]-r[1])*t)?(r=1/Math.sqrt(r),n[0]=e*r,n[1]=t*r,n):(n[0]=0,n[1]=0,n[2]=0,n)},lerp:function(t,r,n,e){return e||(e=t),e[0]=t[0]+n*(r[0]-t[0]),e[1]=t[1]+n*(r[1]-t[1]),e},str:function(t){return"["+t[0]+", "+t[1]+"]"}},d={create:function(t){var r=new a(4);return t?(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3]):r[0]=r[1]=r[2]=r[3]=0,r},createFrom:function(t,r,n,e){var u=new a(4);return u[0]=t,u[1]=r,u[2]=n,u[3]=e,u},set:function(t,r){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r},equal:function(t,r){return t===r||1e-6>Math.abs(t[0]-r[0])&&1e-6>Math.abs(t[1]-r[1])&&1e-6>Math.abs(t[2]-r[2])&&1e-6>Math.abs(t[3]-r[3])},identity:function(t){return t||(t=d.create()),t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},transpose:function(t,r){if(!r||t===r){var n=t[1];return t[1]=t[2],t[2]=n,t}return r[0]=t[0],r[1]=t[2],r[2]=t[1],r[3]=t[3],r},determinant:function(t){return t[0]*t[3]-t[2]*t[1]},inverse:function(t,r){r||(r=t);var n=t[0],e=t[1],a=t[2],u=t[3],i=n*u-a*e;return i?(i=1/i,r[0]=u*i,r[1]=-e*i,r[2]=-a*i,r[3]=n*i,r):null},multiply:function(t,r,n){n||(n=t);var e=t[0],a=t[1],u=t[2];return t=t[3],n[0]=e*r[0]+a*r[2],n[1]=e*r[1]+a*r[3],n[2]=u*r[0]+t*r[2],n[3]=u*r[1]+t*r[3],n},rotate:function(t,r,n){n||(n=t);var e=t[0],a=t[1],u=t[2],i=(t=t[3],Math.sin(r));return r=Math.cos(r),n[0]=e*r+a*i,n[1]=e*-i+a*r,n[2]=u*r+t*i,n[3]=u*-i+t*r,n},multiplyVec2:function(t,r,n){n||(n=r);var e=r[0];return r=r[1],n[0]=e*t[0]+r*t[1],n[1]=e*t[2]+r*t[3],n},scale:function(t,r,n){n||(n=t);var e=t[1],a=t[2],u=t[3],i=r[0];return r=r[1],n[0]=t[0]*i,n[1]=e*r,n[2]=a*i,n[3]=u*r,n},str:function(t){return"["+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+"]"}},p={create:function(t){var r=new a(4);return t?(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3]):(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r},createFrom:function(t,r,n,e){var u=new a(4);return u[0]=t,u[1]=r,u[2]=n,u[3]=e,u},add:function(t,r,n){return n||(n=r),n[0]=t[0]+r[0],n[1]=t[1]+r[1],n[2]=t[2]+r[2],n[3]=t[3]+r[3],n},subtract:function(t,r,n){return n||(n=r),n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],n[3]=t[3]-r[3],n},multiply:function(t,r,n){return n||(n=r),n[0]=t[0]*r[0],n[1]=t[1]*r[1],n[2]=t[2]*r[2],n[3]=t[3]*r[3],n},divide:function(t,r,n){return n||(n=r),n[0]=t[0]/r[0],n[1]=t[1]/r[1],n[2]=t[2]/r[2],n[3]=t[3]/r[3],n},scale:function(t,r,n){return n||(n=t),n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n[3]=t[3]*r,n},set:function(t,r){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r},equal:function(t,r){return t===r||1e-6>Math.abs(t[0]-r[0])&&1e-6>Math.abs(t[1]-r[1])&&1e-6>Math.abs(t[2]-r[2])&&1e-6>Math.abs(t[3]-r[3])},negate:function(t,r){return r||(r=t),r[0]=-t[0],r[1]=-t[1],r[2]=-t[2],r[3]=-t[3],r},length:function(t){var r=t[0],n=t[1],e=t[2];return t=t[3],Math.sqrt(r*r+n*n+e*e+t*t)},squaredLength:function(t){var r=t[0],n=t[1],e=t[2];return r*r+n*n+e*e+(t=t[3])*t},lerp:function(t,r,n,e){return e||(e=t),e[0]=t[0]+n*(r[0]-t[0]),e[1]=t[1]+n*(r[1]-t[1]),e[2]=t[2]+n*(r[2]-t[2]),e[3]=t[3]+n*(r[3]-t[3]),e},str:function(t){return"["+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+"]"}};return t&&(t.glMatrixArrayType=a,t.MatrixArray=a,t.setMatrixArrayType=r,t.determineMatrixArrayType=n,t.glMath=e,t.vec2=y,t.vec3=u,t.vec4=p,t.mat2=d,t.mat3=l,t.mat4=v,t.quat4=m),{glMatrixArrayType:a,MatrixArray:a,setMatrixArrayType:r,determineMatrixArrayType:n,glMath:e,vec2:y,vec3:u,vec4:p,mat2:d,mat3:l,mat4:v,quat4:m}}));