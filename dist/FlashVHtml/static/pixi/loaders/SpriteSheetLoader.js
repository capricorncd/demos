var PIXI=PIXI||{};PIXI.SpriteSheetLoader=function(e){PIXI.EventTarget.call(this),this.url=e,this.baseUrl=e.replace(/[^\/]*$/,""),this.texture,this.frames={}},PIXI.SpriteSheetLoader.constructor=PIXI.SpriteSheetLoader,PIXI.SpriteSheetLoader.prototype.load=function(){this.ajaxRequest=new AjaxRequest;var e=this;this.ajaxRequest.onreadystatechange=function(){e.onLoaded()},this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.send(null)},PIXI.SpriteSheetLoader.prototype.onLoaded=function(){if(4==this.ajaxRequest.readyState&&(200==this.ajaxRequest.status||-1==window.location.href.indexOf("http"))){var jsondata=eval("("+this.ajaxRequest.responseText+")"),textureUrl=this.baseUrl+jsondata.meta.image;this.texture=PIXI.Texture.fromImage(textureUrl).baseTexture;var frameData=jsondata.frames;for(var i in frameData){var rect=frameData[i].frame;PIXI.TextureCache[i]=new PIXI.Texture(this.texture,{x:rect.x,y:rect.y,width:rect.w,height:rect.h})}if(this.texture.hasLoaded)this.dispatchEvent({type:"loaded",content:this});else{var scope=this;this.texture.addEventListener("loaded",(function(){scope.dispatchEvent({type:"loaded",content:scope})}))}}};